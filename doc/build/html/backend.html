

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>backend package (Python code) &mdash; TBD alpha documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="TBD alpha documentation" href="index.html"/>
        <link rel="next" title="backend.static package" href="backend.static.html"/>
        <link rel="prev" title="Startup script" href="main.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> TBD
          

          
          </a>

          
            
            
              <div class="version">
                1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Usage:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
</ul>
<p class="caption"><span class="caption-text">Visualisation Backend:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="main.html">Startup script</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">backend package (Python code)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="backend.static.html">backend.static package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-backend.data_backend">backend.data_backend module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-backend.global_settings">backend.global_settings module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-backend.scenes_manager">backend.scenes_manager module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-backend.scenes_object_prototype">backend.scenes_object_prototype module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-backend.scenes_scene_prototype">backend.scenes_scene_prototype module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-backend.web_server">backend.web_server module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-backend.web_server_api">backend.web_server_api module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-backend.web_server_control">backend.web_server_control module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-backend.web_server_display">backend.web_server_display module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-backend">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="util.html">util package</a></li>
</ul>
<p class="caption"><span class="caption-text">Visualisation Frontend:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="frontend.html">frontend package (JavaScript Code)</a></li>
</ul>
<p class="caption"><span class="caption-text">Control Terminal:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="client.html">client package</a></li>
</ul>
<p class="caption"><span class="caption-text">Misc:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="todo_general.html">General things to do</a></li>
<li class="toctree-l1"><a class="reference internal" href="todo.html">Todo (collection of everything)</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TBD</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>backend package (Python code)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/backend.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="backend-package-python-code">
<h1>backend package (Python code)<a class="headerlink" href="#backend-package-python-code" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="backend.static.html">backend.static package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="backend.static.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="backend.static.html#module-backend.static.make_index">backend.static.make_index module</a></li>
<li class="toctree-l2"><a class="reference internal" href="backend.static.html#module-backend.static">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-backend.data_backend">
<span id="backend-data-backend-module"></span><h2>backend.data_backend module<a class="headerlink" href="#module-backend.data_backend" title="Permalink to this headline">¶</a></h2>
<p>Unpack some binary files and finds the surface of the mesh. Right now this is
limited to C3D8 file format.</p>
<dl class="class">
<dt id="backend.data_backend.UnpackMesh">
<em class="property">class </em><code class="descclassname">backend.data_backend.</code><code class="descname">UnpackMesh</code><span class="sig-paren">(</span><em>node_path</em>, <em>element_path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/data_backend.html#UnpackMesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.data_backend.UnpackMesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Unpack mesh data from two binary files and do some magic to it.</p>
<dl class="method">
<dt id="backend.data_backend.UnpackMesh.add_timestep">
<code class="descname">add_timestep</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/data_backend.html#UnpackMesh.add_timestep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.data_backend.UnpackMesh.add_timestep" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper around the get_binary_data function.</p>
<p>This just calls the function with pre-selected arguments, makes adding
a timestep less confusing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<em>str</em>) – </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="backend.data_backend.UnpackMesh.generate_surfaces_for_elements">
<code class="descname">generate_surfaces_for_elements</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/data_backend.html#UnpackMesh.generate_surfaces_for_elements"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.data_backend.UnpackMesh.generate_surfaces_for_elements" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the outward faces of the mesh (in other words: the surface).
Returns a numpy array with the surface faces.</p>
<p>The mesh consists of cubic elements with corner nodes.
Count the unique occurrences of each node. For each element generate
the six (outward pointing) faces. Iterate over all the points of
each face and add the occurrences (as previously generated) up.
Faces at the corner will have a count of 9, faces at the border a
count of 12 and faces in the middle of the plane a count of 16.
(You might want to draw it on a piece of paper.)</p>
</dd></dl>

<dl class="method">
<dt id="backend.data_backend.UnpackMesh.generate_temperature_file">
<code class="descname">generate_temperature_file</code><span class="sig-paren">(</span><em>timestep</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/data_backend.html#UnpackMesh.generate_temperature_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.data_backend.UnpackMesh.generate_temperature_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="backend.data_backend.UnpackMesh.generate_triangles_from_quads">
<code class="descname">generate_triangles_from_quads</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/data_backend.html#UnpackMesh.generate_triangles_from_quads"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.data_backend.UnpackMesh.generate_triangles_from_quads" title="Permalink to this definition">¶</a></dt>
<dd><p>From our list of quads generate outward pointing triangles.</p>
</dd></dl>

<dl class="method">
<dt id="backend.data_backend.UnpackMesh.generate_unique_surface_triangles">
<code class="descname">generate_unique_surface_triangles</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/data_backend.html#UnpackMesh.generate_unique_surface_triangles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.data_backend.UnpackMesh.generate_unique_surface_triangles" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the unique surface triangles from all the surface_triangles.</p>
</dd></dl>

<dl class="method">
<dt id="backend.data_backend.UnpackMesh.get_binary_data">
<code class="descname">get_binary_data</code><span class="sig-paren">(</span><em>path</em>, <em>do</em>, <em>what</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/data_backend.html#UnpackMesh.get_binary_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.data_backend.UnpackMesh.get_binary_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpack binary data.</p>
<p>Specifying the what to do will either unpack nodes or elements or
add a timestep to self.timesteps.</p>
<p>Open a file and read it as binary, unpack into an array in a specified
format, cast the array to numpy and reshape it.</p>
</dd></dl>

<dl class="method">
<dt id="backend.data_backend.UnpackMesh.return_data_for_unique_nodes">
<code class="descname">return_data_for_unique_nodes</code><span class="sig-paren">(</span><em>object_name</em>, <em>field</em>, <em>timestep</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/data_backend.html#UnpackMesh.return_data_for_unique_nodes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.data_backend.UnpackMesh.return_data_for_unique_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the (i.e.) temperature data for unique nodes.</p>
</dd></dl>

<dl class="method">
<dt id="backend.data_backend.UnpackMesh.return_metadata">
<code class="descname">return_metadata</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/data_backend.html#UnpackMesh.return_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.data_backend.UnpackMesh.return_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the meta-data for the mesh.</p>
<p>Size, etc.</p>
</dd></dl>

<dl class="method">
<dt id="backend.data_backend.UnpackMesh.return_surface_indices">
<code class="descname">return_surface_indices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/data_backend.html#UnpackMesh.return_surface_indices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.data_backend.UnpackMesh.return_surface_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the indices for the OpenGL array triangles.</p>
<p>If a node is already present by means of another triangle, we dont want
to output it too. We dont want redundancy.</p>
</dd></dl>

<dl class="method">
<dt id="backend.data_backend.UnpackMesh.return_unique_surface_nodes">
<code class="descname">return_unique_surface_nodes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/data_backend.html#UnpackMesh.return_unique_surface_nodes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.data_backend.UnpackMesh.return_unique_surface_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the unique surface triangles.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-backend.global_settings">
<span id="backend-global-settings-module"></span><h2>backend.global_settings module<a class="headerlink" href="#module-backend.global_settings" title="Permalink to this headline">¶</a></h2>
<p>A selection of globally available variables.</p>
<p>So far it only contains the scene_manager.</p>
<dl class="function">
<dt id="backend.global_settings.init">
<code class="descclassname">backend.global_settings.</code><code class="descname">init</code><span class="sig-paren">(</span><em>data_dir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/global_settings.html#init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.global_settings.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise the global variables.</p>
<p>The scene_manager is an object that contains all the scenes on the server
and exposes methods to manipulate them and the objects that are contained.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data_dir</strong> (<em>str</em>) – The directory that contains the simulation data.</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Import this module everywhere you need to manipulate scenes.</p>
</dd></dl>

</div>
<div class="section" id="module-backend.scenes_manager">
<span id="backend-scenes-manager-module"></span><h2>backend.scenes_manager module<a class="headerlink" href="#module-backend.scenes_manager" title="Permalink to this headline">¶</a></h2>
<p>This module takes care of storing and manipulating scenes.</p>
<dl class="class">
<dt id="backend.scenes_manager.SceneManager">
<em class="property">class </em><code class="descclassname">backend.scenes_manager.</code><code class="descname">SceneManager</code><span class="sig-paren">(</span><em>data_dir=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/scenes_manager.html#SceneManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.scenes_manager.SceneManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Stores scenes and contains methods for manipulating scenes.</p>
<p>Some design notes:
self._scene_list is a dictionary that contains scene objects (see
<a class="reference internal" href="#backend.scenes_scene_prototype._ScenePrototype" title="backend.scenes_scene_prototype._ScenePrototype"><code class="xref py py-class docutils literal"><span class="pre">backend.scenes_scene_prototype._ScenePrototype</span></code></a>). The dict will
look as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">_scene_list</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;scene_hash_1&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">_ScenePrototype</span> <span class="nb">object</span> <span class="k">for</span> <span class="n">scene_hash_1</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s1">&#39;scene_hash_2&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">_ScenePrototype</span> <span class="nb">object</span> <span class="k">for</span> <span class="n">scene_hash_2</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To now get any information about the scenes (except for the keys) you must
use the methods contained in the _ScenePrototype objects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data_dir</strong> (<em>str</em>) – The (relative) path to some simulation data.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">TypeError</span></code> – If <cite>data_dir</cite> is not of type <cite>str</cite>.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="backend.scenes_manager.SceneManager.delete_scene">
<code class="descname">delete_scene</code><span class="sig-paren">(</span><em>scene_id=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/scenes_manager.html#SceneManager.delete_scene"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.scenes_manager.SceneManager.delete_scene" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a scene.</p>
<p>If no <cite>scene_id</cite> is given, a message is printed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>scene_id</strong> (<em>str</em><em>, </em><em>None</em>) – The scene_hash of the scene to be deleted.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Returns the <cite>scene_id</cite> that was deleted or None, if no
scene could be found to be deleted.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">str, None</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">TypeError</span></code> – If <cite>scene_id</cite> is not of type <cite>str</cite>.</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Make this work with more than one scene.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="backend.scenes_manager.SceneManager.get_femdata_dirs">
<code class="descname">get_femdata_dirs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/scenes_manager.html#SceneManager.get_femdata_dirs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.scenes_manager.SceneManager.get_femdata_dirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list with directories that contain simulation data in
_data_dir.</p>
<p>Check all the files we find in self.data_directory, check if it’s a
directory, if it’s a directory check if there is a directory called
‘fo’ in there. If that’s the case we add it to the list we return
in the end.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>None</strong> – No parameters.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A list containing the names of all the folders in _data_dir
that potentially contain simulation data.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">Maybe put into objects module?
Make this a bit more secure. Just checking for the ‘fo’ directory is a
bit optimistic and could probably be exploited (then again: for
what?).</p>
</div>
</dd></dl>

<dl class="method">
<dt id="backend.scenes_manager.SceneManager.get_scene_infos">
<code class="descname">get_scene_infos</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/scenes_manager.html#SceneManager.get_scene_infos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.scenes_manager.SceneManager.get_scene_infos" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dict with all the scenes and information for every scene.</p>
<p>Go through every key (= scene_hash) in self._scene_list and get the
object information from the corresponding value (= _ScenePrototype
object) by calling the internal method for retrieving the list of
objects.</p>
<p>The returned dict looks as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">info_dict</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;scene_hash_1&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;object_list&#39;</span><span class="p">:</span> <span class="s1">&#39;obj_1&#39;</span><span class="p">,</span> <span class="s1">&#39;obj_3&#39;</span><span class="p">},</span>
    <span class="s1">&#39;scene_hash_2&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;object_list&#39;</span><span class="p">:</span> <span class="s1">&#39;obj_1&#39;</span><span class="p">,</span> <span class="s1">&#39;obj_2&#39;</span><span class="p">},</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A dictionary containing all the scenes and all the objects in
every scene.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">dict</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-2">
<p class="first admonition-title">Todo</p>
<p class="last">Rename to <code class="docutils literal"><span class="pre">get_scenes_info</span></code>.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="backend.scenes_manager.SceneManager.new_scene">
<code class="descname">new_scene</code><span class="sig-paren">(</span><em>object_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/scenes_manager.html#SceneManager.new_scene"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.scenes_manager.SceneManager.new_scene" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new scene with an object.</p>
<p>This adds a ScenePrototype to <cite>self._scene_list</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>object_path</strong> (<em>None</em><em>, </em><em>str</em><em>, </em><em>list</em><em> (</em><em>of str</em><em>)</em><em>, </em><em>defaults to None</em>) – The path to
the objects we want to instantiate a new scene with.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The name (scene_hash) of the newly created scene.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">TypeError</span></code> – If <code class="docutils literal"><span class="pre">type(object_path)</span></code> is not <cite>list</cite> and/or entries
thereof are not <code class="docutils literal"><span class="pre">str</span></code>.</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-3">
<p class="first admonition-title">Todo</p>
<p class="last">Make it impossible to create an empty scene.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="backend.scenes_manager.SceneManager.scene">
<code class="descname">scene</code><span class="sig-paren">(</span><em>scene_id=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/scenes_manager.html#SceneManager.scene"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.scenes_manager.SceneManager.scene" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a scene object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>scene_id</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>defaults to None</em>) – The unique identifier of
the scene that we want to return.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None if no scene with a matching id
could be found, otherwise return the scene object.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">None or _ScenePrototype object</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#backend.scenes_scene_prototype._ScenePrototype" title="backend.scenes_scene_prototype._ScenePrototype"><code class="xref py py-class docutils literal"><span class="pre">backend.scenes_scene_prototype._ScenePrototype</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-backend.scenes_object_prototype">
<span id="backend-scenes-object-prototype-module"></span><h2>backend.scenes_object_prototype module<a class="headerlink" href="#module-backend.scenes_object_prototype" title="Permalink to this headline">¶</a></h2>
<p>The class for an object.</p>
<p>An object is all data we have about some simulation. That contains the name,
all the data points, its orientation in R3 and so on.</p>
<dl class="class">
<dt id="backend.scenes_object_prototype._ObjectPrototype">
<em class="property">class </em><code class="descclassname">backend.scenes_object_prototype.</code><code class="descname">_ObjectPrototype</code><span class="sig-paren">(</span><em>object_path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/scenes_object_prototype.html#_ObjectPrototype"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.scenes_object_prototype._ObjectPrototype" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>The prototype class for a simulation object.</p>
<p>On initialization the name of the object is set based on the path to the
data. The initial orientation is set to an identity transformation and all
the lists for containing data points are initialized.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>object_path</strong> (<cite>os.PathLike</cite>) – The path to some simulation data.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">TypeError</span></code> – If <cite>object_path</cite> is not <cite>os.PathLike</cite></td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-4">
<p class="first admonition-title">Todo</p>
<p class="last">Load all the simulation data on initialization.</p>
</div>
<dl class="method">
<dt id="backend.scenes_object_prototype._ObjectPrototype.index_data">
<code class="descname">index_data</code><span class="sig-paren">(</span><em>data=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/scenes_object_prototype.html#_ObjectPrototype.index_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.scenes_object_prototype._ObjectPrototype.index_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Get or set the index data.</p>
<div class="admonition-todo admonition" id="index-5">
<p class="first admonition-title">Todo</p>
<p class="last">Everything about this. This is just a placeholder for now. We need to
implement methods for doing this automatically. This should call a
method for extracting index data.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="backend.scenes_object_prototype._ObjectPrototype.name">
<code class="descname">name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/scenes_object_prototype.html#_ObjectPrototype.name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.scenes_object_prototype._ObjectPrototype.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the name of the object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The name of the object.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="backend.scenes_object_prototype._ObjectPrototype.orientation">
<code class="descname">orientation</code><span class="sig-paren">(</span><em>view_matrix=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/scenes_object_prototype.html#_ObjectPrototype.orientation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.scenes_object_prototype._ObjectPrototype.orientation" title="Permalink to this definition">¶</a></dt>
<dd><p>Get (if view_matrix is None) or set (if view_matrix is not None)
the orientation of an object in the scene.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>view_matrix</strong> (<em>np.ndarray</em><em> or </em><em>None</em><em>, </em><em>optional</em><em>, </em><em>defaults to None</em>) – A 4x4
numpy matrix for setting the orientation of the object. The top-left
3x3 matrix should be unitary, so rotation is represented. The rest
can contain scaling values.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">TypeError</span></code> – If <code class="docutils literal"><span class="pre">type(view_matrix)</span></code> is not None or np.ndarray and/or
if the shape is not 4x4.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="backend.scenes_object_prototype._ObjectPrototype.tetraeder_data">
<code class="descname">tetraeder_data</code><span class="sig-paren">(</span><em>data=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/scenes_object_prototype.html#_ObjectPrototype.tetraeder_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.scenes_object_prototype._ObjectPrototype.tetraeder_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Get or set the tetraeder data.</p>
<div class="admonition-todo admonition" id="index-6">
<p class="first admonition-title">Todo</p>
<p class="last">Everything about this. This is just a placeholder for now. We need to
implement methods for doing this automatically. This should call a
method for extracting tetraeder data.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="backend.scenes_object_prototype._ObjectPrototype.wireframe_data">
<code class="descname">wireframe_data</code><span class="sig-paren">(</span><em>data=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/scenes_object_prototype.html#_ObjectPrototype.wireframe_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.scenes_object_prototype._ObjectPrototype.wireframe_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Get or set the wireframe data.</p>
<div class="admonition-todo admonition" id="index-7">
<p class="first admonition-title">Todo</p>
<p class="last">Everything about this. This is just a placeholder for now. We need to
implement methods for doing this automatically. This should call a
method for extracting wireframe data.</p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-backend.scenes_scene_prototype">
<span id="backend-scenes-scene-prototype-module"></span><h2>backend.scenes_scene_prototype module<a class="headerlink" href="#module-backend.scenes_scene_prototype" title="Permalink to this headline">¶</a></h2>
<p>The class for a scene.</p>
<p>A scene contains a number of objects.</p>
<dl class="class">
<dt id="backend.scenes_scene_prototype._ScenePrototype">
<em class="property">class </em><code class="descclassname">backend.scenes_scene_prototype.</code><code class="descname">_ScenePrototype</code><span class="sig-paren">(</span><em>data_dir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/scenes_scene_prototype.html#_ScenePrototype"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.scenes_scene_prototype._ScenePrototype" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Contains a list of objects and methods for manipulating the scene.</p>
<p>On initialization a unique identifier is generated and assigned to the
scene.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data_dir</strong> (<em>os.PathLike</em>) – A path pointing to the directory containing our
simulation data.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">TypeError</span></code> – If <code class="docutils literal"><span class="pre">type(data_dir)</span></code> is not <cite>os.PathLike</cite>.</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-8">
<p class="first admonition-title">Todo</p>
<p class="last">Maybe it’s worthwhile to declutter the add and delete functions by just
allowing them to add one function.</p>
</div>
<dl class="method">
<dt id="backend.scenes_scene_prototype._ScenePrototype.add_object">
<code class="descname">add_object</code><span class="sig-paren">(</span><em>object_path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/scenes_scene_prototype.html#_ScenePrototype.add_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.scenes_scene_prototype._ScenePrototype.add_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Add one or multiple object(s) to the scene.</p>
<p>There are two helper functions implemented in this method:</p>
<ul class="simple">
<li><em>verify_object_path</em>: Verify that the given object path contains
simulation data that we can add. Do this by checking for a /fo or
/frb subpath.</li>
<li><em>add_one_object</em>: Add one object to the _object_list.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>object_path</strong> (<em>str</em><em>, </em><em>list</em><em> (</em><em>of str</em><em>)</em>) – The relative path to the object
root, relative to <cite>data_dir</cite>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">TypeError</span></code> – If <code class="docutils literal"><span class="pre">type(object_path)</span></code> is neither <cite>os.PathLike</cite> nor
<cite>list</cite>.</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-9">
<p class="first admonition-title">Todo</p>
<p class="last">verify_object_path throws an exception that is probably not necessary.
Assign a CRC32 hash to an object? Or CRC64?
Only allow one object to be added at a time?</p>
</div>
</dd></dl>

<dl class="method">
<dt id="backend.scenes_scene_prototype._ScenePrototype.delete_object">
<code class="descname">delete_object</code><span class="sig-paren">(</span><em>object_id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/scenes_scene_prototype.html#_ScenePrototype.delete_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.scenes_scene_prototype._ScenePrototype.delete_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove one or multiple object(s) from the list of objects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object_id</strong> (<em>str</em><em>, </em><em>list</em><em> (</em><em>of str</em><em>)</em>) – The relative path to the object
root, relative to <cite>data_dir</cite>.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">TypeError</span></code> – If <code class="docutils literal"><span class="pre">type(object_path)</span></code> is neither <cite>os.PathLike</cite> nor
<cite>list</cite>.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">TypeError</span></code> – If <code class="docutils literal"><span class="pre">type(object_path)</span></code> is <cite>list</cite> but the type of one
list entry is not <cite>os.PathLike</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-10">
<p class="first admonition-title">Todo</p>
<p class="last">See declutter todo in class.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="backend.scenes_scene_prototype._ScenePrototype.name">
<code class="descname">name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/scenes_scene_prototype.html#_ScenePrototype.name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.scenes_scene_prototype._ScenePrototype.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the name for the scene.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>None</strong> – No parameters.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The name (scene_hash) of the scene. This is created on
initialization by creating a sha1 hash from the linux timestamp.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="backend.scenes_scene_prototype._ScenePrototype.object_list">
<code class="descname">object_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/scenes_scene_prototype.html#_ScenePrototype.object_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.scenes_scene_prototype._ScenePrototype.object_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of all the objects in this scene.</p>
<p>Create a sorted view (list) of the keys of the dict
<cite>self._object_list</cite>. If this list is empty, append a notice to this
list that there are no objects and return the list. Otherwise just
return the (non empty) list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list with objects in this scene or a notice, that there are
no objects in this scene.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-backend.web_server">
<span id="backend-web-server-module"></span><h2>backend.web_server module<a class="headerlink" href="#module-backend.web_server" title="Permalink to this headline">¶</a></h2>
<p>The web server class. This will host a web server at a given port.</p>
<dl class="class">
<dt id="backend.web_server.Web_Server">
<em class="property">class </em><code class="descclassname">backend.web_server.</code><code class="descname">Web_Server</code><span class="sig-paren">(</span><em>frontend_directory</em>, <em>data_directory</em>, <em>port=8008</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server.html#Web_Server"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server.Web_Server" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Host a web server on a given port and hand out the files in the path.</p>
<p>On initialising it sets the path to the control interface directory and to
the directory that contains the visualization. It also sets the
configurations for the control interface, for the visualization and for
the API. Finally, it initializes the global settings module.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>frontend_directory</strong> (<em>str</em>) – The path to the frontend.</li>
<li><strong>data_directory</strong> (<em>str</em>) – The path to the directory, that contains the
simulation data.</li>
<li><strong>port</strong> (<em>int</em><em>, </em><em>optional</em><em>, </em><em>defaults to 8008</em>) – The port on which the
backend listens to connections.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-11">
<p class="first admonition-title">Todo</p>
<p class="last">Replace path strings with Pathlike objects.</p>
</div>
<p class="rubric">Notes</p>
<p>The global_settings module is initialized in __init__().</p>
<dl class="method">
<dt id="backend.web_server.Web_Server.start">
<code class="descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server.html#Web_Server.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server.Web_Server.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the web server with the parameters that were set upon
initialization.</p>
<p>This mounts three different servers:</p>
<ul class="simple">
<li>one that serves the configuration menu on <code class="docutils literal"><span class="pre">http://HOST:PORT/</span></code>. The
server class rests in <code class="docutils literal"><span class="pre">backend.web_server_control</span></code>.</li>
<li>one that serves the visualization on <code class="docutils literal"><span class="pre">http://HOST:PORT/scenes</span></code>. The
server class rests in <code class="docutils literal"><span class="pre">backend.web_server_display</span></code>.</li>
<li>one for the API endpoint on <code class="docutils literal"><span class="pre">http://HOST:PORT/api</span></code>. The server
class rests in <code class="docutils literal"><span class="pre">backend.web_server_api</span></code>.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>None</strong> – No parameters.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Nothing.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>After this method is called, no further commands will be evaluated
until after the backend is shut down.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-backend.web_server_api">
<span id="backend-web-server-api-module"></span><h2>backend.web_server_api module<a class="headerlink" href="#module-backend.web_server_api" title="Permalink to this headline">¶</a></h2>
<p>This module contains the class for the API endpoints of the backend.</p>
<dl class="class">
<dt id="backend.web_server_api.ServerAPI">
<em class="property">class </em><code class="descclassname">backend.web_server_api.</code><code class="descname">ServerAPI</code><a class="reference internal" href="_modules/backend/web_server_api.html#ServerAPI"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_api.ServerAPI" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>This class contains the API endpoints of the backend.</p>
<p>Any method that is exposed via <cite>&#64;cherrypy.expose</cite> decorator can be reached
under <code class="docutils literal"><span class="pre">http://HOST:PORT/api/METHOD</span></code>, with <code class="docutils literal"><span class="pre">METHOD</span></code> being the exposed
method.</p>
<p>A new method with JSON (<code class="docutils literal"><span class="pre">http://HOST:PORT/api/a_new_method_with_json</span></code>)
should be implemented as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@cherrypy.expose</span>
<span class="nd">@cherrypy.tools.json_in</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">a_new_method_with_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="n">input_json_dict</span> <span class="o">=</span> <span class="n">cherrypy</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">json</span>
    <span class="n">incoming_value</span> <span class="o">=</span> <span class="n">input_json_dict</span><span class="p">[</span><span class="s1">&#39;incoming_key&#39;</span><span class="p">]</span>

    <span class="n">outgoing_value</span> <span class="o">=</span> <span class="n">some_function</span><span class="p">(</span><span class="n">incoming_value</span><span class="p">)</span>
    <span class="n">output_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;outgoing_key&#39;</span><span class="p">:</span> <span class="n">outgoing_value</span><span class="p">}</span>

    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">outgoing_dict</span><span class="p">)</span>
</pre></div>
</div>
<p>The decorator <cite>&#64;cherrypy.expose</cite> tells the class that we want this method
to be reachable via the API. The decorator <cite>&#64;cherrypy.tools.json_in()</cite>
enables the method to receive a JSON file.
We can read this JSON file into a dictionary and extract a value.
We then create an outgoing dictionary and return this with json.dumps().</p>
<p>We can of course omit the JSON decorator if we don’t need to receive a
JSON file.</p>
<p class="rubric">Notes</p>
<p>Any JSON package that should reach the API has to be delivered with a POST
request.</p>
<dl class="method">
<dt id="backend.web_server_api.ServerAPI.connect_client">
<code class="descname">connect_client</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server_api.html#ServerAPI.connect_client"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_api.ServerAPI.connect_client" title="Permalink to this definition">¶</a></dt>
<dd><p>This returns a dictionary containing program name and version number.</p>
<p>With this method a client can verify that the backend is running a
compatible version.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>None</strong> – Nothing.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A dictionary containing program name and version.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">JSON dict</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="client.util_client.html#client.util_client.test_host.target_online_and_compatible" title="client.util_client.test_host.target_online_and_compatible"><code class="xref py py-meth docutils literal"><span class="pre">client.util_client.test_host.target_online_and_compatible()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="backend.web_server_api.ServerAPI.get_object_properties">
<code class="descname">get_object_properties</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server_api.html#ServerAPI.get_object_properties"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_api.ServerAPI.get_object_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of properties for a given element on catching
‘get_object_properties’</p>
<p>Go through all timestep folders and look in every ef- and nf-folder
for files. Append every file to an array, afterwards find the unique
files in that array. Append this list to a list containing an entry
for a simple wireframe (i.e. no field values, just the bare mesh).</p>
<p>Returns a json file.</p>
</dd></dl>

<dl class="method">
<dt id="backend.web_server_api.ServerAPI.get_object_timesteps">
<code class="descname">get_object_timesteps</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server_api.html#ServerAPI.get_object_timesteps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_api.ServerAPI.get_object_timesteps" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of the available timesteps for a given element on
catching ‘get_object_timesteps’</p>
<p>Go through all the folders in the object/fo folder. Every folder
here is a timestep.</p>
<p>Returns a json file.</p>
</dd></dl>

<dl class="method">
<dt id="backend.web_server_api.ServerAPI.get_sorted_timesteps">
<code class="descname">get_sorted_timesteps</code><span class="sig-paren">(</span><em>object_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server_api.html#ServerAPI.get_sorted_timesteps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_api.ServerAPI.get_sorted_timesteps" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a sorted list of timesteps.</p>
<p>Go through all the folders in the object/fo folder. Every folder
here is a timestep.</p>
<p>Returns a list of lists.</p>
</dd></dl>

<dl class="method">
<dt id="backend.web_server_api.ServerAPI.get_timestep_after">
<code class="descname">get_timestep_after</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server_api.html#ServerAPI.get_timestep_after"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_api.ServerAPI.get_timestep_after" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a timestep, find the next timestep.</p>
<p>Return the same timestep if there is no timestep after.</p>
</dd></dl>

<dl class="method">
<dt id="backend.web_server_api.ServerAPI.get_timestep_before">
<code class="descname">get_timestep_before</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server_api.html#ServerAPI.get_timestep_before"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_api.ServerAPI.get_timestep_before" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a timestep, find the previous timestep.</p>
<p>Return the same timestep if there is no timestep before.</p>
</dd></dl>

<dl class="method">
<dt id="backend.web_server_api.ServerAPI.get_timestep_data">
<code class="descname">get_timestep_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server_api.html#ServerAPI.get_timestep_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_api.ServerAPI.get_timestep_data" title="Permalink to this definition">¶</a></dt>
<dd><p>On getting a POST:get_some_data from the webserver we give
the required data back.</p>
</dd></dl>

<dl class="method">
<dt id="backend.web_server_api.ServerAPI.list_of_fem_data">
<code class="descname">list_of_fem_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server_api.html#ServerAPI.list_of_fem_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_api.ServerAPI.list_of_fem_data" title="Permalink to this definition">¶</a></dt>
<dd><p>List the available fem simulation directories.</p>
<p>A list of all available simulation data folders can be obtained from
the scene_manager.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A dictionary containing available <cite>data_folders</cite>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">JSON dict</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition" id="index-12">
<p class="first admonition-title">Todo</p>
<p class="last">_dos is not part of the client module. Fix that!</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#backend.scenes_manager.SceneManager.get_femdata_dirs" title="backend.scenes_manager.SceneManager.get_femdata_dirs"><code class="xref py py-meth docutils literal"><span class="pre">backend.scenes_manager.SceneManager.get_femdata_dirs()</span></code></a>
<a class="reference internal" href="client._dos.html#_dos.do_objects.objects" title="_dos.do_objects.objects"><code class="xref py py-func docutils literal"><span class="pre">_dos.do_objects.objects()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="backend.web_server_api.ServerAPI.mesher_init">
<code class="descname">mesher_init</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server_api.html#ServerAPI.mesher_init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_api.ServerAPI.mesher_init" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the mesher class.</p>
</dd></dl>

<dl class="method">
<dt id="backend.web_server_api.ServerAPI.requestTimestepData">
<code class="descname">requestTimestepData</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server_api.html#ServerAPI.requestTimestepData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_api.ServerAPI.requestTimestepData" title="Permalink to this definition">¶</a></dt>
<dd><p>Deliver a JSON file to the caller containing an indexed list of
surface triangles, surface node data, corresponding index data and
also non-indexed wireframe data for the surface.</p>
</dd></dl>

<dl class="method">
<dt id="backend.web_server_api.ServerAPI.scenes_create">
<code class="descname">scenes_create</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server_api.html#ServerAPI.scenes_create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_api.ServerAPI.scenes_create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new scene.</p>
<p>We expect a JSON package with key ‘object_path’. The value has to be a
list, containing valid objects. If the list is empty, an empty scene
will be created.</p>
<dl class="docutils">
<dt>Expected JSON package:</dt>
<dd><code class="docutils literal"><span class="pre">{'object_path':</span> <span class="pre">['list',</span> <span class="pre">'with',</span> <span class="pre">'objects']}</span></code></dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A dictionary containing a the unique hash of the scene,
that has been created.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">JSON dict</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#backend.scenes_manager.SceneManager.new_scene" title="backend.scenes_manager.SceneManager.new_scene"><code class="xref py py-meth docutils literal"><span class="pre">backend.scenes_manager.SceneManager.new_scene()</span></code></a>
<a class="reference internal" href="client._dos.html#_dos.do_scenes.scenes_create" title="_dos.do_scenes.scenes_create"><code class="xref py py-func docutils literal"><span class="pre">_dos.do_scenes.scenes_create()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="backend.web_server_api.ServerAPI.scenes_delete">
<code class="descname">scenes_delete</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server_api.html#ServerAPI.scenes_delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_api.ServerAPI.scenes_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a scene.</p>
</dd></dl>

<dl class="method">
<dt id="backend.web_server_api.ServerAPI.scenes_infos">
<code class="descname">scenes_infos</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server_api.html#ServerAPI.scenes_infos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_api.ServerAPI.scenes_infos" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of scenes.</p>
<p>A list of created scenes can be obtained from the scene_manager.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A dictionary containing a scenes and the objects within
each scene.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">JSON dict</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#backend.scenes_manager.SceneManager.get_scene_infos" title="backend.scenes_manager.SceneManager.get_scene_infos"><code class="xref py py-meth docutils literal"><span class="pre">backend.scenes_manager.SceneManager.get_scene_infos()</span></code></a>
<a class="reference internal" href="client._dos.html#_dos.do_scenes.scenes_list" title="_dos.do_scenes.scenes_list"><code class="xref py py-func docutils literal"><span class="pre">_dos.do_scenes.scenes_list()</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-backend.web_server_control">
<span id="backend-web-server-control-module"></span><h2>backend.web_server_control module<a class="headerlink" href="#module-backend.web_server_control" title="Permalink to this headline">¶</a></h2>
<p>The control interface for the web server. This should be seen as support for
the client program.</p>
<p>So far there is no functionality. It serves as a reminder.</p>
<dl class="class">
<dt id="backend.web_server_control.ServerRoot">
<em class="property">class </em><code class="descclassname">backend.web_server_control.</code><code class="descname">ServerRoot</code><a class="reference internal" href="_modules/backend/web_server_control.html#ServerRoot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_control.ServerRoot" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Handle the data for fem-gl.</p>
<dl class="method">
<dt id="backend.web_server_control.ServerRoot.index">
<code class="descname">index</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server_control.html#ServerRoot.index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_control.ServerRoot.index" title="Permalink to this definition">¶</a></dt>
<dd><p>The scene administration page.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-backend.web_server_display">
<span id="backend-web-server-display-module"></span><h2>backend.web_server_display module<a class="headerlink" href="#module-backend.web_server_display" title="Permalink to this headline">¶</a></h2>
<p>The web server class with all available RESTful api endpoints.</p>
<p>For example: call the server on SERVER_ADRESS/get_object_list to get a list
of the available objects in the data directory.</p>
<dl class="class">
<dt id="backend.web_server_display.ServerDisplayScene">
<em class="property">class </em><code class="descclassname">backend.web_server_display.</code><code class="descname">ServerDisplayScene</code><a class="reference internal" href="_modules/backend/web_server_display.html#ServerDisplayScene"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_display.ServerDisplayScene" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>The class for the actual visualization of scenes that exist in the backend.</p>
<dl class="method">
<dt id="backend.web_server_display.ServerDisplayScene.default">
<code class="descname">default</code><span class="sig-paren">(</span><em>scene_hash</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server_display.html#ServerDisplayScene.default"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_display.ServerDisplayScene.default" title="Permalink to this definition">¶</a></dt>
<dd><p>The default site that is displayed with this class.</p>
<p>This generates a <code class="docutils literal"><span class="pre">index.html</span></code> file that has an existing scene_hash
encoded.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>scene_hash</strong> (<em>str</em>) – A unique identifier that corresponds to an existing
scene in the backend.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A string containing the HTML source for generating the
<code class="docutils literal"><span class="pre">index.html</span></code> file. This has the scene_hash encoded.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="backend.web_server_display.ServerScenesDispatcher">
<em class="property">class </em><code class="descclassname">backend.web_server_display.</code><code class="descname">ServerScenesDispatcher</code><a class="reference internal" href="_modules/backend/web_server_display.html#ServerScenesDispatcher"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_display.ServerScenesDispatcher" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>A class for deciding what visualization we want to display.</p>
<p>This loads the actual visualization with control menu and colorbar, without
any overlay, or it displays a dummy model without colorbar or control menu,
but with an text overlay.</p>
<dl class="method">
<dt id="backend.web_server_display.ServerScenesDispatcher._cp_dispatch">
<code class="descname">_cp_dispatch</code><span class="sig-paren">(</span><em>vpath</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server_display.html#ServerScenesDispatcher._cp_dispatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_display.ServerScenesDispatcher._cp_dispatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Inspect the part of the URL after <code class="docutils literal"><span class="pre">http://HOST:PORT/scenes/</span></code> and
dispatch an error message or the actual visualization class.</p>
<p>If the first node is a valid scene_hash we return the actual
visualization class <cite>ServerDisplayScene</cite>. Otherwise we generate an
error message.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vpath</strong> (<em>list</em>) – This contains the segments of the URL after
<code class="docutils literal"><span class="pre">http://HOST:PORT/scenes/</span></code>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Return the visualization class or an
error message.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#backend.web_server_display.ServerDisplayScene" title="backend.web_server_display.ServerDisplayScene">ServerDisplayScene</a> or <a class="reference internal" href="#backend.web_server_display.ServerScenesDispatcher.error" title="backend.web_server_display.ServerScenesDispatcher.error">error</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="backend.web_server_display.ServerScenesDispatcher.error">
<code class="descname">error</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server_display.html#ServerScenesDispatcher.error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_display.ServerScenesDispatcher.error" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <code class="docutils literal"><span class="pre">index.html</span></code> file to inform us that we are trying to look at
a scene that does not exist.</p>
<p>This method is called if we call
<code class="docutils literal"><span class="pre">http://HOST:PORT/scenes/INVALID_HASH</span></code>, with <cite>INVALID_HASH</cite> being a
hash that does not exist in the global settings array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>None</strong> – Nothing.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A string containing the HTML source for generating the
<code class="docutils literal"><span class="pre">index.html</span></code> file.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="backend.web_server_display.ServerScenesDispatcher.index">
<code class="descname">index</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/backend/web_server_display.html#ServerScenesDispatcher.index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#backend.web_server_display.ServerScenesDispatcher.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <code class="docutils literal"><span class="pre">index.html</span></code> file to inform us that we have not selected any
scenes.</p>
<p>This method is called if we call <code class="docutils literal"><span class="pre">http://HOST:PORT/scenes(/)</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>None</strong> – Nothing.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A string containing the HTML source for generating the
<code class="docutils literal"><span class="pre">index.html</span></code> file.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-backend">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-backend" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="backend.static.html" class="btn btn-neutral float-right" title="backend.static package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="main.html" class="btn btn-neutral" title="Startup script" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Matthias Plock.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'alpha',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>